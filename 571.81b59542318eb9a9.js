"use strict";(self.webpackChunkweb_mzima_client=self.webpackChunkweb_mzima_client||[]).push([[571],{79571:(ye,L,r)=>{r.r(L),r.d(L,{WebhooksModule:()=>g});var m=r(52954),a=r(93557),Y=r(95432),A=r(94626),C=r(37661),W=r(33695),J=r(56370),S=r(37366),l=r(25303),p=r(81547),F=r(89857),c=r(40930),D=r(31415),Q=r(4540),d=r(10909),U=r(20117),_=r(59132),u=r(49119),e=r(39609),T=r(53625),q=r(952),O=r(93149);function j(n,o){if(1&n&&(e.TgZ(0,"h1"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,t.isCreateWebhook?"app.add_webhook":"app.edit_webhook"),"\n")}}function $(n,o){1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"settings.webhooks.validation.required.name")))}function M(n,o){1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"settings.webhooks.validation.required.shared_secret")," "))}function z(n,o){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n){const t=e.oxw(2);let i;e.xp6(1),e.lnq(" ",e.lcZ(2,3,"settings.webhooks.validation.secret_key_cannot_be_less_start")," ",null==(i=t.form.get("shared_secret"))||null==i.errors?null:i.errors.minlength.requiredLength," ",e.lcZ(3,5,"settings.webhooks.validation.secret_key_cannot_be_less_end")," ")}}function P(n,o){1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"settings.webhooks.validation.required.api_url")))}function B(n,o){1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"settings.webhooks.validation.please_provide_valid_api_url")," "))}function G(n,o){if(1&n&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.value)("data-qa",t.value),e.xp6(1),e.hij(" ",t.name," ")}}function K(n,o){1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"settings.webhooks.validation.required.event_type")))}function E(n,o){if(1&n&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.value)("data-qa",t.value),e.xp6(1),e.hij(" ",t.name," ")}}function H(n,o){1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"settings.webhooks.validation.required.event_entity")))}function X(n,o){1&n&&(e.TgZ(0,"span")(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"data_import.which_survey")))}function R(n,o){if(1&n&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.id)("data-qa",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function V(n,o){1&n&&(e.TgZ(0,"th",32),e._uU(1,"Type"),e.qZA())}function ee(n,o){if(1&n&&(e.TgZ(0,"td",33),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function te(n,o){1&n&&(e.TgZ(0,"th",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"survey.survey_field")))}function oe(n,o){if(1&n&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.key)("data-qa",t.key),e.xp6(1),e.hij(" ",t.label," ")}}function ne(n,o){if(1&n&&(e.TgZ(0,"td",33)(1,"div",3)(2,"mat-form-field",5)(3,"mat-select",34),e.YNc(4,oe,2,3,"mat-option",10),e.qZA()()()()),2&n){const t=o.$implicit,i=e.oxw(5);e.xp6(3),e.Q6J("formControlName",t.control)("data-qa","source-select"),e.xp6(1),e.Q6J("ngForOf",i.surveyAttributesList)}}function ie(n,o){1&n&&e._UZ(0,"tr",35)}function re(n,o){1&n&&e._UZ(0,"tr",36)}const N=function(){return["type","field"]};function ae(n,o){if(1&n&&(e.TgZ(0,"table",25),e.ynx(1,26),e.YNc(2,V,2,0,"th",27),e.YNc(3,ee,2,1,"td",28),e.BQk(),e.ynx(4,29),e.YNc(5,te,3,3,"th",27),e.YNc(6,ne,5,3,"td",28),e.BQk(),e.YNc(7,ie,1,0,"tr",30),e.YNc(8,re,1,0,"tr",31),e.qZA()),2&n){const t=e.oxw(4);e.Q6J("dataSource",t.fields),e.xp6(7),e.Q6J("matHeaderRowDef",e.DdM(3,N)),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(4,N))}}const se=function(n){return{datasource_type:n}};function le(n,o){if(1&n&&(e.TgZ(0,"div",3)(1,"h2"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,ae,9,5,"table",24),e.qZA()),2&n){const t=e.oxw(3);let i;e.xp6(2),e.Oqu(e.lcZ(3,3,"survey.choose_survey_field")),e.xp6(3),e.hij(" ",e.xi3(6,5,"survey.choose_survey_field_desc",e.VKq(8,se,t.getSurveyName(null==(i=t.form.get("form_id"))?null:i.value)))," "),e.xp6(2),e.Q6J("ngIf",t.fields)}}function ce(n,o){if(1&n&&(e.TgZ(0,"div",21)(1,"p"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",3)(5,"mat-label"),e._uU(6),e.ALo(7,"translate"),e.YNc(8,X,4,3,"span",0),e.qZA(),e.TgZ(9,"mat-form-field",5)(10,"mat-select",22),e.YNc(11,R,2,3,"mat-option",10),e.qZA()()(),e.YNc(12,le,8,10,"div",23),e.qZA()),2&n){const t=e.oxw(2);let i,s;e.xp6(2),e.Oqu(e.lcZ(3,6,"settings.webhooks.enable_source_destination_desc")),e.xp6(4),e.hij(" ",e.lcZ(7,8,"settings.webhooks.use_webhook_for")," "),e.xp6(2),e.Q6J("ngIf",!(null!=(i=t.form.get("form_id"))&&i.value)),e.xp6(2),e.Q6J("data-qa","survey-select"),e.xp6(1),e.Q6J("ngForOf",t.surveyList),e.xp6(1),e.Q6J("ngIf",null==(s=t.form.get("form_id"))?null:s.value)}}function me(n,o){1&n&&e._UZ(0,"div",37)}function ue(n,o){1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"app.delete")))}function pe(n,o){1&n&&e._UZ(0,"mat-icon",40)}function _e(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mzima-client-button",38),e.NdJ("buttonClick",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.openDialog())}),e.YNc(1,ue,3,3,"ng-container",0),e.YNc(2,pe,1,0,"mat-icon",39),e.qZA()}if(2&n){const t=e.oxw(2);let i;e.Q6J("data-qa","btn-webhook-delete")("disabled",!(null!=(i=t.form.get("id"))&&i.value))("iconOnly",!t.isDesktop),e.xp6(1),e.Q6J("ngIf",t.isDesktop),e.xp6(1),e.Q6J("ngIf",!t.isDesktop)}}function de(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.save())}),e.TgZ(1,"div",3)(2,"mat-label"),e._uU(3),e.ALo(4,"translate"),e.TgZ(5,"span",4),e._uU(6,"*"),e.qZA()(),e.TgZ(7,"mat-form-field",5),e._UZ(8,"input",6),e.ALo(9,"translate"),e.YNc(10,$,3,3,"mat-error",0),e.qZA()(),e.TgZ(11,"div",3)(12,"mat-label"),e._uU(13),e.ALo(14,"translate"),e.TgZ(15,"span",4),e._uU(16,"*"),e.qZA()(),e.TgZ(17,"mat-form-field",5),e._UZ(18,"input",7),e.ALo(19,"translate"),e.YNc(20,M,3,3,"mat-error",0),e.YNc(21,z,4,7,"mat-error",0),e.qZA()(),e.TgZ(22,"div",3)(23,"mat-label"),e._uU(24),e.ALo(25,"translate"),e.TgZ(26,"span",4),e._uU(27,"*"),e.qZA()(),e.TgZ(28,"mat-form-field",5),e._UZ(29,"input",8),e.ALo(30,"translate"),e.YNc(31,P,3,3,"mat-error",0),e.YNc(32,B,3,3,"mat-error",0),e.qZA()(),e.TgZ(33,"div",3)(34,"mat-label"),e._uU(35),e.ALo(36,"translate"),e.TgZ(37,"span",4),e._uU(38,"*"),e.qZA()(),e.TgZ(39,"mat-form-field",5)(40,"mat-select",9),e.YNc(41,G,2,3,"mat-option",10),e.qZA(),e.YNc(42,K,3,3,"mat-error",0),e.qZA()(),e.TgZ(43,"div",3)(44,"mat-label"),e._uU(45),e.ALo(46,"translate"),e.TgZ(47,"span",4),e._uU(48,"*"),e.qZA()(),e.TgZ(49,"mat-form-field",5)(50,"mat-select",11),e.YNc(51,E,2,3,"mat-option",10),e.qZA(),e.YNc(52,H,3,3,"mat-error",0),e.qZA()(),e.TgZ(53,"div",3)(54,"div",12)(55,"mat-slide-toggle",13),e._uU(56),e.ALo(57,"translate"),e.qZA()()(),e.YNc(58,ce,13,10,"div",14),e.YNc(59,me,1,0,"div",15),e.TgZ(60,"div",16)(61,"div"),e.YNc(62,_e,3,5,"mzima-client-button",17),e.qZA(),e.TgZ(63,"div")(64,"mzima-client-button",18),e.NdJ("buttonClick",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.cancel())}),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.TgZ(67,"mzima-client-button",19),e._uU(68),e.ALo(69,"translate"),e.qZA()()()()}if(2&n){const t=e.oxw();let i,s,v,k,x,Z,y,w;e.Q6J("formGroup",t.form),e.xp6(3),e.hij("",e.lcZ(4,30,"webhook.name")," "),e.xp6(5),e.s9C("placeholder",e.lcZ(9,32,"settings.webhooks.placeholder.name")),e.xp6(2),e.Q6J("ngIf",null==(i=t.form.get("name"))?null:i.hasError("required")),e.xp6(3),e.hij(" ",e.lcZ(14,34,"webhook.shared_secret")," "),e.xp6(5),e.s9C("placeholder",e.lcZ(19,36,"settings.webhooks.placeholder.shared_secret")),e.xp6(2),e.Q6J("ngIf",null==(s=t.form.get("shared_secret"))?null:s.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(v=t.form.get("shared_secret"))?null:v.hasError("minlength")),e.xp6(3),e.hij("",e.lcZ(25,38,"webhook.url")," "),e.xp6(5),e.s9C("placeholder",e.lcZ(30,40,"settings.webhooks.placeholder.api_url")),e.xp6(2),e.Q6J("ngIf",null==(k=t.form.get("url"))?null:k.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(x=t.form.get("url"))?null:x.hasError("pattern")),e.xp6(3),e.hij(" ",e.lcZ(36,42,"webhook.event_type")," "),e.xp6(5),e.Q6J("data-qa","webhook-event-select"),e.xp6(1),e.Q6J("ngForOf",t.eventList),e.xp6(1),e.Q6J("ngIf",null==(Z=t.form.get("event_type"))?null:Z.invalid),e.xp6(3),e.hij(" ",e.lcZ(46,44,"webhook.entity_type")," "),e.xp6(5),e.Q6J("data-qa","webhook-entity-select"),e.xp6(1),e.Q6J("ngForOf",t.entityList),e.xp6(1),e.Q6J("ngIf",null==(y=t.form.get("entity_type"))?null:y.invalid),e.xp6(3),e.Q6J("data-qa","source-destination-toogle"),e.xp6(1),e.hij(" ",e.lcZ(57,46,"settings.webhooks.enable_source_destination")," "),e.xp6(2),e.Q6J("ngIf",null==(w=t.form.get("is_source_destination"))?null:w.value),e.xp6(1),e.Q6J("ngIf",!t.isDesktop),e.xp6(3),e.Q6J("ngIf",!t.isCreateWebhook),e.xp6(2),e.Q6J("data-qa","btn-webhook-cancel"),e.xp6(1),e.hij(" ",e.lcZ(66,48,"app.cancel")," "),e.xp6(2),e.Q6J("disabled",t.form.invalid||t.submitted)("data-qa","btn-webhook-save"),e.xp6(1),e.hij(" ",e.lcZ(69,50,t.isCreateWebhook?"app.save":"app.edit")," ")}}let h=class I{route;webhooksService;formBuilder;surveysService;formsService;router;confirmModalService;translate;breakpointService;location;isDesktop$;webhook;form;eventList=[{name:"Create",value:"create"},{name:"Update",value:"update"}];entityList=[{name:"Post",value:"post"}];surveyList=[];surveyAttributesList=[];controlFormIdData$;isCreateWebhook=!1;fields;isDesktop=!1;submitted=!1;constructor(o,t,i,s,v,k,x,Z,y,w){this.route=o,this.webhooksService=t,this.formBuilder=i,this.surveysService=s,this.formsService=v,this.router=k,this.confirmModalService=x,this.translate=Z,this.breakpointService=y,this.location=w,this.isDesktop$=this.breakpointService.isDesktop$.pipe((0,U.t)(this)),this.isDesktop$.subscribe({next:Ze=>{this.isDesktop=Ze}}),this.form=this.formBuilder.group({allowed_privileges:[""],created:[""],destination_field_key:[null],entity_type:["",[a.kI.required]],event_type:["",[a.kI.required]],form_id:[null],id:[0],name:["",[a.kI.required]],shared_secret:["",[a.kI.required,a.kI.minLength(20)]],source_field_key:[null],updated:[""],url:["",[a.kI.required,a.kI.pattern(d.XZ.urlValidate())]],user:[""],webhook_uuid:[""],is_source_destination:[!1]}),this.controlFormIdData$=this.form.controls.form_id.valueChanges.pipe((0,d.oJ)())}ngOnInit(){this.getSurveys();const o=this.route.snapshot.paramMap.get("id");"create"===o?this.isCreateWebhook=!0:this.getWebhook(o),this.form.controls.form_id.value&&this.getSurveyAttributes(this.form.controls.form_id.value),this.controlFormIdData$.subscribe({next:t=>{t&&this.getSurveyAttributes(t)},error:t=>console.log(t)})}getWebhook(o){this.webhooksService.getById(o).subscribe({next:t=>{this.webhook=t.result,this.fillInForm(t.result)},error:t=>console.log(t)})}fillInForm(o){Object.keys(o).forEach(t=>{this.form.controls[t]&&this.form.controls[t].patchValue(o[t])}),this.form.controls.is_source_destination.patchValue(!!this.form.controls.form_id.value)}getSurveys(){this.surveysService.get().subscribe({next:o=>{this.surveyList=o.results,this.fields=[{name:"Source",control:"source_field_key"},{name:this.translate.instant("settings.webhooks.destination"),control:"destination_field_key"}]},error:o=>console.log(o)})}getSurveyAttributes(o){this.formsService.getAttributes(o.toString()).subscribe({next:t=>{this.surveyAttributesList=t,this.fillInForm({destination_field_key:this.checkKeyFields(this.webhook?.destination_field_key),source_field_key:this.checkKeyFields(this.webhook?.source_field_key)})},error:t=>console.log(t)})}checkKeyFields(o){return"title"===o||"content"===o?this.filterAttributes("type","title"===o?o:"description")?.key:o?o.replace(/values./gi,""):void 0}filterAttributes(o,t){return this.surveyAttributesList.find(i=>i[o]===t)}fillForApi(o){return"title"===o.type||"description"===o.type?"title"===o.type?o.type:"content":`values.${o.key}`}save(){this.submitted=!0,this.form.value.is_source_destination&&this.fillInForm({destination_field_key:this.fillForApi(this.filterAttributes("key",this.form.controls.destination_field_key.value)),source_field_key:this.fillForApi(this.filterAttributes("key",this.form.controls.source_field_key.value))}),this.deleteFormFields(["is_source_destination"]),this.isCreateWebhook?this.postWebhook():this.updateWebhook()}postWebhook(){this.deleteFormFields(["id","created","updated","allowed_privileges","user"]),this.webhooksService.post(this.form.value).subscribe({next:()=>this.navigateToWebhooks(),error:o=>{console.log(o),this.submitted=!1}})}updateWebhook(){this.webhooksService.update(this.form.controls.id.value,this.form.value).subscribe({next:()=>this.navigateToWebhooks(),error:o=>{console.log(o),this.submitted=!1}})}cancel(){this.navigateToWebhooks()}navigateToWebhooks(){this.webhooksService.setState(!0),this.isDesktop?this.router.navigate(["/settings/webhooks"]):this.location.back()}deleteFormFields(o){for(const t of o)delete this.form.value[t]}openDialog(){var o=this;return(0,D.Z)(function*(){!(yield o.confirmModalService.open({title:o.form.controls.name.value+" webhook will be deleted!",description:"<p>This action cannot be undone.</p><p>Are you sure?</p>"}))||o.deleteWebhook()})()}deleteWebhook(){this.webhooksService.delete(this.form.controls.id.value).subscribe({next:()=>this.navigateToWebhooks(),error:o=>console.log(o)})}getSurveyName(o){return this.surveyList.find(t=>t.id===o)?.name||""}static \u0275fac=function(t){return new(t||I)(e.Y36(c.gz),e.Y36(u.tn),e.Y36(a.qu),e.Y36(u.w4),e.Y36(u.s8),e.Y36(c.F0),e.Y36(_.hP),e.Y36(p.sK),e.Y36(_.r),e.Y36(m.Ye))};static \u0275cmp=e.Xpm({type:I,selectors:[["app-webhook-item"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","form","novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["novalidate","",1,"form",3,"formGroup","ngSubmit"],[1,"form-row"],[1,"color-accent"],["appearance","outline"],["matInput","","formControlName","name","required","",3,"placeholder"],["matInput","","formControlName","shared_secret","required","",3,"placeholder"],["matInput","","formControlName","url","required","",3,"placeholder"],["formControlName","event_type","disableOptionCentering","",3,"data-qa"],[3,"value","data-qa",4,"ngFor","ngForOf"],["formControlName","entity_type","disableOptionCentering","",3,"data-qa"],[1,"toggle"],["formControlName","is_source_destination","name","first-name",3,"data-qa"],["class","source-destination-wrapper",4,"ngIf"],["class","form-controls-spacer",4,"ngIf"],[1,"form-controls-panel","form-controls-panel--sticky"],["color","danger","class","delete-btn",3,"data-qa","disabled","iconOnly","buttonClick",4,"ngIf"],["type","button","fill","outline","color","secondary",3,"data-qa","buttonClick"],["type","submit",3,"disabled","data-qa"],[3,"value","data-qa"],[1,"source-destination-wrapper"],["formControlName","form_id","disableOptionCentering","",3,"data-qa"],["class","form-row",4,"ngIf"],["mat-table","","class","webhook__table",3,"dataSource",4,"ngIf"],["mat-table","",1,"webhook__table",3,"dataSource"],["matColumnDef","type"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","field"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["disableOptionCentering","",3,"formControlName","data-qa"],["mat-header-row",""],["mat-row",""],[1,"form-controls-spacer"],["color","danger",1,"delete-btn",3,"data-qa","disabled","iconOnly","buttonClick"],["icon","","svgIcon","delete",4,"ngIf"],["icon","","svgIcon","delete"]],template:function(t,i){1&t&&(e.YNc(0,j,3,3,"h1",0),e.YNc(1,de,70,52,"form",1)),2&t&&(e.Q6J("ngIf",i.isDesktop),e.xp6(1),e.Q6J("ngIf",i.form))},dependencies:[m.sg,m.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,T.zL,T.xG,C.Hw,q.TO,q.KE,q.hX,W.Nt,J.gD,A.ey,S.Rr,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,O.r,p.X$],styles:["h1[_ngcontent-%COMP%]{margin-bottom:32px}.form-controls-panel[_ngcontent-%COMP%]{justify-content:space-between}.form-controls-panel[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.webhook[_ngcontent-%COMP%]{margin-bottom:32px}.webhook__table[_ngcontent-%COMP%]{width:100%}.webhook__table[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin:8px 0}@media only screen and (max-width: 1024px){.delete-button[_ngcontent-%COMP%]{padding:0;display:flex;height:48px;min-width:64px;align-items:center;flex-direction:column;justify-content:center;box-shadow:inset 0 0 0 1px var(--color-neutral-60)!important}}"]})};function he(n,o){1&n&&(e.TgZ(0,"h1"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"app.webhooks")))}h=(0,Q.gn)([(0,U.c)(),(0,Q.w6)("design:paramtypes",[c.gz,u.tn,a.qu,u.w4,u.s8,c.F0,_.hP,p.sK,_.r,m.Ye])],h);const fe=function(n){return[n]};function be(n,o){if(1&n&&(e.TgZ(0,"a",6),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("routerLink",e.VKq(4,fe,t.id))("routerLinkActive","active")("data-qa",t.name),e.xp6(1),e.hij(" ",t.name," ")}}const ge=function(){return["create"]};function ve(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",1),e.YNc(2,he,3,3,"h1",0),e.ALo(3,"async"),e.TgZ(4,"mzima-client-button",2)(5,"span"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"mat-icon",3),e.qZA()(),e.TgZ(9,"div",4),e.YNc(10,be,2,6,"a",5),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",e.lcZ(3,6,t.isDesktop$)),e.xp6(2),e.Q6J("routerLink",e.DdM(10,ge))("data-qa","btn-webhook-create"),e.xp6(2),e.Oqu(e.lcZ(7,8,"webhook.add_webhook")),e.xp6(3),e.Q6J("data-qa","webhook-list"),e.xp6(1),e.Q6J("ngForOf",t.webhookList)}}class f{webhooksService;breakpointService;webhookList=[];webhookState$;isDesktop$;constructor(o,t){this.webhooksService=o,this.breakpointService=t,this.isDesktop$=this.breakpointService.isDesktop$.pipe((0,d.oJ)()),this.webhookState$=this.webhooksService.changeWebhookState$.pipe((0,d.oJ)())}ngOnInit(){this.getWebhookList(),this.webhookState$.subscribe({next:o=>{o&&this.getWebhookList()},error:o=>console.log(o)})}getWebhookList(){this.webhooksService.get().subscribe({next:o=>{this.webhookList=o.results,this.webhooksService.setState(!1)},error:o=>console.log(o)})}static \u0275fac=function(t){return new(t||f)(e.Y36(u.tn),e.Y36(_.r))};static \u0275cmp=e.Xpm({type:f,selectors:[["app-webhooks"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"form-head-panel"],[3,"routerLink","data-qa"],["icon","","svgIcon","plus"],[1,"webhook-item-list",3,"data-qa"],["mat-ripple","","class","webhook-item",3,"routerLink","routerLinkActive","data-qa",4,"ngFor","ngForOf"],["mat-ripple","",1,"webhook-item",3,"routerLink","routerLinkActive","data-qa"]],template:function(t,i){1&t&&e.YNc(0,ve,11,11,"ng-container",0),2&t&&e.Q6J("ngIf",i.webhookList)},dependencies:[m.sg,m.O5,c.rH,c.yS,c.Od,T.xG,C.Hw,A.wG,O.r,m.Ov,p.X$],styles:[".webhook-item[_ngcontent-%COMP%]{display:flex;cursor:pointer;font-size:14px;line-height:1.5;min-height:48px;font-weight:700;margin-bottom:8px;padding:8px 16px;border-radius:4px;align-items:center;text-decoration:none;color:var(--color-black);background:var(--color-neutral-10);box-shadow:inset 0 0 0 1px var(--color-neutral-20)}@media only screen and (max-width: 1024px){.webhook-item[_ngcontent-%COMP%]{min-height:74px;text-align:center;margin-bottom:16px;justify-content:center}}@media only screen and (max-width: 1024px){.form-head-panel[_ngcontent-%COMP%]{margin-bottom:24px;justify-content:flex-end}}"]})}const ke=[{path:"",component:f},{path:":id",component:h,data:{breadcrumb:"Update webhook"}},{path:"create",component:h,data:{breadcrumb:"Create webhook"}}];class b{static \u0275fac=function(t){return new(t||b)};static \u0275mod=e.oAB({type:b});static \u0275inj=e.cJS({imports:[c.Bz.forChild(ke),c.Bz]})}var xe=r(17733);class g{static \u0275fac=function(t){return new(t||g)};static \u0275mod=e.oAB({type:g});static \u0275inj=e.cJS({imports:[m.ez,a.UX,p.aw,b,Y.ot,F.Z6,C.Ps,A.si,W.c,J.LD,S.rP,l.p0,xe.e]})}}}]);
//# sourceMappingURL=571.81b59542318eb9a9.js.map