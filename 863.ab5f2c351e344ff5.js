"use strict";(self.webpackChunkweb_mzima_client=self.webpackChunkweb_mzima_client||[]).push([[863],{3863:(k,v,o)=>{o.r(v),o.d(v,{DonationModule:()=>g});var u=o(52954),a=o(93557),U=o(95432),Z=o(33695),C=o(81547),L=o(89857),d=o(40930),A=o(4540),D=o(49119),T=o(98703),b=o(11754),x=o(20117),m=o(59132),t=o(39609),F=o(45006),S=o(37366),J=o(53625),y=o(47288),c=o(952),z=o(93149);function q(l,n){1&l&&(t.TgZ(0,"h1"),t._uU(1,"Setup Donation"),t.qZA())}function j(l,n){1&l&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"settings.donation.title.required")," "))}function I(l,n){1&l&&t._UZ(0,"div",17)}let f=class h{formBuilder;sessionService;mediaService;loader;configService;breakpointService;router;isDesktop$;donationConfig;images=[];donationForm;isDesktop;constructor(n,i,e,s,r,Y,B){this.formBuilder=n,this.sessionService=i,this.mediaService=e,this.loader=s,this.configService=r,this.breakpointService=Y,this.router=B,this.isDesktop$=this.breakpointService.isDesktop$.pipe((0,x.t)(this)),this.isDesktop$.subscribe({next:$=>{this.isDesktop=$}}),this.donationForm=this.formBuilder.group({title:["",[a.kI.required]],description:["",[]],wallet:["",[]],enabled:[!1,[]]})}ngOnInit(){this.initForm()}deleteImage(n){this.donationConfig.images=this.donationConfig.images.filter(i=>i.id!==n)}uploadFile(n){this.loader.show(),this.mediaService.uploadFile(n.file).subscribe(i=>{this.donationConfig.images.push({id:i.result.id,original_file_url:i.result.original_file_url}),this.images=this.donationConfig.images.map(e=>e.original_file_url),this.loader.hide()})}save(){this.loader.show();const n=Object.assign({},this.donationForm.value,{images:this.donationConfig.images});this.configService.update("site",{donation:n}).subscribe(i=>{this.sessionService.setSiteDonationConfigurations(i.donation),this.donationConfig=this.sessionService.getSiteConfigurations().donation,this.loader.hide()})}imageDeleted(n){this.donationConfig.images.splice(n,1),this.images=this.donationConfig.images.map(i=>i.original_file_url)}cancel(){this.isDesktop?this.initForm():this.router.navigate(["settings"])}initForm(){this.donationConfig=this.sessionService.getSiteConfigurations().donation,this.images=this.donationConfig.images.map(n=>n.original_file_url),this.donationForm.patchValue({title:this.donationConfig.title,description:this.donationConfig.description,wallet:this.donationConfig.wallet,enabled:this.donationConfig.enabled})}static \u0275fac=function(i){return new(i||h)(t.Y36(a.qu),t.Y36(m.mj),t.Y36(D.yJ),t.Y36(T.D),t.Y36(b.E),t.Y36(m.r),t.Y36(d.F0))};static \u0275cmp=t.Xpm({type:h,selectors:[["app-donation"]],decls:57,vars:61,consts:[[4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],[1,"form-row","toggle-group"],[1,"toggle"],["formControlName","enabled",3,"data-qa"],[1,"form-row"],["appearance","outline"],["matInput","","formControlName","title","required","",3,"placeholder","data-qa"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","4","cdkAutosizeMaxRows","8","formControlName","description",3,"data-qa","placeholder"],[3,"multiple","imageSrc","fileUpload","delete"],["matInput","","formControlName","wallet",3,"data-qa","placeholder"],["target","_blank","href","https://uphold.com"],["target","_blank","href","https://wallet.uphold.com/signup"],["class","form-controls-spacer",4,"ngIf"],[1,"form-controls-panel","form-controls-panel--sticky"],["fill","outline","color","secondary",3,"data-qa","buttonClick"],[3,"data-qa","buttonClick"],[1,"form-controls-spacer"]],template:function(i,e){if(1&i&&(t.YNc(0,q,2,0,"h1",0),t.ALo(1,"async"),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return e.save()}),t.TgZ(3,"div",2)(4,"div",3)(5,"mat-slide-toggle",4),t._uU(6),t.ALo(7,"translate"),t.qZA()()(),t.TgZ(8,"div",5)(9,"mat-label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"mat-form-field",6),t._UZ(13,"input",7),t.ALo(14,"translate"),t.YNc(15,j,3,3,"mat-error",0),t.qZA()(),t.TgZ(16,"div",5)(17,"mat-label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"mat-form-field",6),t._UZ(21,"textarea",8),t.ALo(22,"translate"),t.qZA()(),t.TgZ(23,"div",5)(24,"mat-label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"app-file-uploader",9),t.NdJ("fileUpload",function(r){return e.uploadFile(r)})("delete",function(r){return e.imageDeleted(r)}),t.qZA()(),t.TgZ(28,"div",5)(29,"mat-label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"mat-form-field",6),t._UZ(33,"input",10),t.ALo(34,"translate"),t.TgZ(35,"mat-hint"),t._uU(36),t.ALo(37,"translate"),t.TgZ(38,"a",11),t._uU(39,"uphold.com"),t.qZA(),t._uU(40),t.ALo(41,"translate"),t.ALo(42,"translate"),t.TgZ(43,"a",12),t._uU(44),t.ALo(45,"translate"),t.qZA(),t._uU(46),t.ALo(47,"translate"),t.qZA()()()(),t.YNc(48,I,1,0,"div",13),t.ALo(49,"async"),t.TgZ(50,"div",14)(51,"mzima-client-button",15),t.NdJ("buttonClick",function(){return e.cancel()}),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"mzima-client-button",16),t.NdJ("buttonClick",function(){return e.save()}),t._uU(55),t.ALo(56,"translate"),t.qZA()()),2&i){let s;t.Q6J("ngIf",t.lcZ(1,27,e.isDesktop$)),t.xp6(2),t.Q6J("formGroup",e.donationForm),t.xp6(3),t.Q6J("data-qa","monetization-toggle"),t.xp6(1),t.hij(" ",t.lcZ(7,29,"app.enable_monetization")," "),t.xp6(4),t.Oqu(t.lcZ(11,31,"settings.donation.title.label")),t.xp6(3),t.s9C("placeholder",t.lcZ(14,33,"settings.donation.title.placeholder")),t.Q6J("data-qa","title"),t.xp6(2),t.Q6J("ngIf",null==(s=e.donationForm.get("title"))?null:s.invalid),t.xp6(3),t.Oqu(t.lcZ(19,35,"settings.donation.description.label")),t.xp6(3),t.s9C("placeholder",t.lcZ(22,37,"settings.donation.description.placeholder")),t.Q6J("data-qa","description"),t.xp6(4),t.Oqu(t.lcZ(26,39,"settings.donation.images.label")),t.xp6(2),t.Q6J("multiple",!0)("imageSrc",e.images),t.xp6(3),t.Oqu(t.lcZ(31,41,"settings.donation.wallet.label")),t.xp6(3),t.s9C("placeholder",t.lcZ(34,43,"settings.donation.wallet.placeholder")),t.Q6J("data-qa","wallet"),t.xp6(3),t.hij(" ",t.lcZ(37,45,"settings.donation.info.start_one")," "),t.xp6(4),t.AsE(" ",t.lcZ(41,47,"settings.donation.info.start_two")," ",t.lcZ(42,49,"settings.donation.info.start_three")," "),t.xp6(4),t.Oqu(t.lcZ(45,51,"settings.donation.info.here")),t.xp6(2),t.hij(" ",t.lcZ(47,53,"settings.donation.info.end")," "),t.xp6(2),t.Q6J("ngIf",!t.lcZ(49,55,e.isDesktop$)),t.xp6(3),t.Q6J("data-qa","btn-cancel"),t.xp6(1),t.hij(" ",t.lcZ(53,57,"app.cancel")," "),t.xp6(2),t.Q6J("data-qa","btn-save"),t.xp6(1),t.hij(" ",t.lcZ(56,59,"app.save")," ")}},dependencies:[u.O5,F.G,S.Rr,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,J.zL,J.xG,y.IC,c.TO,c.KE,c.bx,c.hX,Z.Nt,z.r,u.Ov,C.X$],styles:["h1[_ngcontent-%COMP%]{margin-bottom:32px}@media only screen and (max-width: 1366px){h1[_ngcontent-%COMP%]{margin-bottom:24px}}"]})};f=(0,A.gn)([(0,x.c)(),(0,A.w6)("design:paramtypes",[a.qu,m.mj,D.yJ,T.D,b.E,m.r,d.F0])],f);const N=[{path:"",component:f}];class p{static \u0275fac=function(i){return new(i||p)};static \u0275mod=t.oAB({type:p});static \u0275inj=t.cJS({imports:[d.Bz.forChild(N),d.Bz]})}var O=o(47031),Q=o(17733);class g{static \u0275fac=function(i){return new(i||g)};static \u0275mod=t.oAB({type:g});static \u0275inj=t.cJS({imports:[u.ez,p,O.SettingsModule,S.rP,a.UX,L.Z6,C.aw,Z.c,U.ot,Q.e]})}}}]);
//# sourceMappingURL=863.ab5f2c351e344ff5.js.map