"use strict";(self.webpackChunkweb_mzima_client=self.webpackChunkweb_mzima_client||[]).push([[31],{47031:(Y,f,t)=>{t.r(f),t.d(f,{SettingsModule:()=>m});var a=t(52954),A=t(95432),u=t(94626),M=t(69420),p=t(37661),v=t(81547),I=t(89857),d=t(40930),e=t(78611),r=t(16992),x=t(59132),C=t(68751),S=t(31020),b=t(6902),s=t(39609),y=t(53625);function P(n,o){if(1&n&&(s.TgZ(0,"a",3)(1,"div",4),s._UZ(2,"mat-icon",5),s.TgZ(3,"h3",6),s._uU(4),s.ALo(5,"translate"),s.qZA()(),s.TgZ(6,"div",7)(7,"p"),s._uU(8),s.ALo(9,"translate"),s.qZA()()()),2&n){const i=s.oxw().$implicit;s.Q6J("routerLink",i.router)("routerLinkActive","single-menu-active")("data-qa","btn-"+i.router),s.xp6(2),s.s9C("svgIcon",i.icon),s.xp6(2),s.Oqu(s.lcZ(5,6,i.title)),s.xp6(4),s.Oqu(s.lcZ(9,8,i.description))}}function Z(n,o){if(1&n&&(s.ynx(0),s.YNc(1,P,10,10,"a",2),s.BQk()),2&n){const i=o.$implicit;s.xp6(1),s.Q6J("ngIf",i.visible)}}class g{session;userRole;permissions;isAdmin=!1;isManageUsers=!1;isManageSettings=!1;isManageImportExport=!1;settingsItems=[];isDonateAvailable=!1;constructor(o){this.session=o}ngOnInit(){this.isAdmin=this.userRole===r.G.Admin,this.isManageUsers=this.permissions.includes(r.P.ManageUsers),this.isManageSettings=this.permissions.includes(r.P.ManageSettings),this.isManageImportExport=this.permissions.includes(r.P.ImportExport),this.isDonateAvailable=this.session.getSiteConfigurations().donation?.enabled,this.initMenu()}initMenu(){this.settingsItems=[{title:"settings.settings_list.general",description:"settings.settings_list.general_desc",icon:"general",router:"general",visible:this.isAdmin||this.isManageSettings},{title:"settings.settings_list.surveys",description:"settings.settings_list.surveys_desc",icon:"surveys",router:"surveys",visible:this.isAdmin||this.isManageSettings},{title:"settings.settings_list.data_sources",description:"settings.settings_list.data_sources_desc",icon:"data-source",router:"data-sources",visible:this.isAdmin||this.isManageSettings},{title:"settings.settings_list.import",description:"settings.settings_list.import_desc",icon:"import",router:"data-import",visible:this.isAdmin||this.isManageImportExport},{title:"settings.settings_list.donation",description:"settings.settings_list.donation_desc",icon:"donate",router:"donation",visible:this.isAdmin&&this.isDonateAvailable||this.isManageSettings&&this.isDonateAvailable},{title:"settings.settings_list.user_settings",description:"settings.settings_list.user_settings_desc",icon:"configure",router:"user-settings",visible:this.isAdmin||this.isManageUsers||this.isManageSettings||this.isManageImportExport},{title:"settings.settings_list.export_hxl",description:"settings.settings_list.export_desc_hxl",icon:"export",router:"data-export",visible:this.isAdmin||this.isManageImportExport},{title:"settings.settings_list.users",description:"settings.settings_list.users_desc",icon:"users",router:"users",visible:this.isAdmin||this.isManageUsers},{title:"settings.settings_list.roles",description:"settings.settings_list.roles_desc",icon:"roles",router:"roles",visible:this.isAdmin},{title:"settings.settings_list.categories",description:"settings.settings_list.categories_desc",icon:"categories",router:"categories",visible:this.isAdmin||this.isManageSettings},{title:"settings.settings_list.webhooks",description:"settings.settings_list.webhooks_desc",icon:"webhook",router:"webhooks",visible:this.isAdmin||this.isManageSettings}]}static \u0275fac=function(i){return new(i||g)(s.Y36(x.mj))};static \u0275cmp=s.Xpm({type:g,selectors:[["app-settings"]],inputs:{userRole:"userRole",permissions:"permissions"},decls:2,vars:1,consts:[[1,"settings"],[4,"ngFor","ngForOf"],["matRipple","","class","single-menu",3,"routerLink","routerLinkActive","data-qa",4,"ngIf"],["matRipple","",1,"single-menu",3,"routerLink","routerLinkActive","data-qa"],[1,"single-menu__header"],[1,"single-menu__header__icon",3,"svgIcon"],[1,"single-menu__title"],[1,"single-menu__info"]],template:function(i,l){1&i&&(s.TgZ(0,"div",0),s.YNc(1,Z,2,1,"ng-container",1),s.qZA()),2&i&&(s.xp6(1),s.Q6J("ngForOf",l.settingsItems))},dependencies:[a.sg,a.O5,d.yS,d.Od,p.Hw,y.xG,u.wG,v.X$],styles:[".single-menu{padding:16px;display:block;font-size:12px;cursor:pointer;line-height:1.3;border-radius:8px;text-decoration:none;transition:box-shadow .35s ease;box-shadow:inset 0 0 0 1px var(--color-neutral-20)}@media only screen and (max-width: 1024px){.single-menu{font-size:14px;line-height:1.3;padding:16px 16px 20px;color:var(--color-neutral-80)}}.single-menu:not(:last-child){margin-bottom:8px}@media only screen and (max-width: 1024px){.single-menu:not(:last-child){margin-bottom:16px}}.single-menu:hover{box-shadow:inset 0 0 0 1px var(--color-primary-70)}.single-menu-active{box-shadow:inset 0 0 0 2px var(--color-primary-70)}.single-menu__header{display:flex;margin-bottom:8px;align-items:center;color:var(--color-black)}.single-menu__header__icon{width:1em;height:1em;flex-shrink:0;font-size:24px;margin-inline-end:8px}.single-menu__title{margin:0!important}@media only screen and (max-width: 1366px){.single-menu__title{font-size:18px!important}}@media only screen and (max-width: 1024px){.single-menu__title{font-size:16px!important}}.single-menu__info{color:var(--color-neutral-80)}.single-menu__info p:last-child{margin-bottom:0}\n"],encapsulation:2})}function D(n,o){if(1&n&&s._UZ(0,"app-settings",3),2&n){const i=s.oxw();s.Q6J("userRole",i.user.role)("permissions",i.user.permissions)}}const O=function(n){return{"page-content":n}};function T(n,o){if(1&n&&(s.TgZ(0,"div",4)(1,"div",5),s._UZ(2,"router-outlet"),s.qZA()()),2&n){const i=s.oxw();s.xp6(1),s.Q6J("ngClass",s.VKq(1,O,i.isDesktop))}}class c extends S.H{sessionService;breakpointService;router;eventBusService;isInnerPage=!1;constructor(o,i,l,L){super(o,i),this.sessionService=o,this.breakpointService=i,this.router=l,this.eventBusService=L,this.getUserData(),this.checkDesktop(),this.checkIsInnerPage(),this.isDesktop&&!this.isInnerPage&&this.navigateToInnerPage(),this.router.events.pipe((0,C.h)(z=>z instanceof d.m2)).subscribe({next:()=>{this.checkIsInnerPage()}})}loadData(){}navigateToInnerPage(){switch(this.user.role){case r.G.Admin:case r.G.ManageSettings:this.router.navigate(["settings/general"]);break;case r.G.ManageUsers:this.router.navigate(["settings/user-settings"]);break;case r.G.ManageImportExport:this.router.navigate(["settings/data-import"])}}checkIsInnerPage(){this.isInnerPage=this.router.url.split("/").length>2,this.eventBusService.next({type:"IS_SETTINGS_INNER_PAGE",payload:{inner:this.isInnerPage}})}static \u0275fac=function(i){return new(i||c)(s.Y36(b.m),s.Y36(x.r),s.Y36(d.F0),s.Y36(x.Yd))};static \u0275cmp=s.Xpm({type:c,selectors:[["app-settings-layout"]],features:[s.qOj],decls:3,vars:2,consts:[[1,"settings-layout"],["class","settings-menu",3,"userRole","permissions",4,"ngIf"],["class","settings-router",4,"ngIf"],[1,"settings-menu",3,"userRole","permissions"],[1,"settings-router"],[3,"ngClass"]],template:function(i,l){1&i&&(s.TgZ(0,"div",0),s.YNc(1,D,1,2,"app-settings",1),s.YNc(2,T,3,3,"div",2),s.qZA()),2&i&&(s.xp6(1),s.Q6J("ngIf",l.isDesktop||!l.isInnerPage),s.xp6(1),s.Q6J("ngIf",l.isDesktop||l.isInnerPage))},dependencies:[a.mk,a.O5,d.lC,g],styles:["@media only screen and (min-width: 1025px){.settings-layout[_ngcontent-%COMP%]{display:flex;height:100%;justify-content:flex-start}}@media only screen and (max-width: 1024px){.settings-layout[_ngcontent-%COMP%]{padding:24px 16px;background:var(--color-light)}}@media only screen and (min-width: 1025px){.settings-menu[_ngcontent-%COMP%]{height:100%;flex:0 0 304px;overflow-y:auto;overflow-x:hidden;padding:24px 16px;scroll-behavior:smooth;background:var(--color-light);-webkit-overflow-scrolling:touch;--scrollbar-background: var(--color-light)}}@media only screen and (min-width: 1025px) and (max-width: 1366px){.settings-menu[_ngcontent-%COMP%]{flex-basis:240px;padding:16px 8px}}@media only screen and (min-width: 1025px){.settings-router[_ngcontent-%COMP%]{height:100%;flex:1 1 100%;overflow-y:auto;overflow-x:hidden;position:relative;padding:24px 32px 32px;scroll-behavior:smooth;-webkit-overflow-scrolling:touch}}@media only screen and (min-width: 1025px) and (max-width: 1366px){.settings-router[_ngcontent-%COMP%]{padding:16px}}"]})}const U=[{path:"",component:c,children:[{path:"general",loadChildren:()=>t.e(178).then(t.bind(t,42178)).then(n=>n.GeneralModule),canActivate:[e.n8],data:{breadcrumb:"General",guards:[e.uy,e.Z3]}},{path:"surveys",loadChildren:()=>Promise.all([t.e(592),t.e(957)]).then(t.bind(t,63957)).then(n=>n.SurveysModule),canActivate:[e.n8],data:{breadcrumb:"Surveys",guards:[e.uy,e.Z3]}},{path:"data-sources",loadChildren:()=>Promise.all([t.e(303),t.e(152)]).then(t.bind(t,46152)).then(n=>n.DataSourcesModule),canActivate:[e.n8],data:{breadcrumb:"Data sources",guards:[e.uy,e.Z3]}},{path:"data-import",loadChildren:()=>Promise.all([t.e(303),t.e(158)]).then(t.bind(t,65158)).then(n=>n.DataImportModule),canActivate:[e.n8],data:{breadcrumb:"Data import",guards:[e.uy,e.DZ]}},{path:"donation",loadChildren:()=>t.e(863).then(t.bind(t,3863)).then(n=>n.DonationModule),canActivate:[e.n8],data:{breadcrumb:"Donation",guards:[e.uy,e.Z3]}},{path:"user-settings",loadChildren:()=>t.e(63).then(t.bind(t,23063)).then(n=>n.UserSettingsModule),canActivate:[e.n8],data:{breadcrumb:"Configure HDX API",guards:[e.uy,e.IW,e.Z3,e.DZ]}},{path:"data-export",loadChildren:()=>Promise.all([t.e(303),t.e(122)]).then(t.bind(t,68122)).then(n=>n.DataExportModule),canActivate:[e.n8],data:{breadcrumb:"Data export",guards:[e.uy,e.DZ]}},{path:"users",loadChildren:()=>Promise.all([t.e(835),t.e(592),t.e(549)]).then(t.bind(t,93549)).then(n=>n.UsersModule),canActivate:[e.n8],data:{breadcrumb:"Users",guards:[e.uy,e.IW]}},{path:"roles",loadChildren:()=>t.e(927).then(t.bind(t,8927)).then(n=>n.RolesModule),canActivate:[e.n8],data:{breadcrumb:"Roles"}},{path:"categories",loadChildren:()=>Promise.all([t.e(592),t.e(575)]).then(t.bind(t,15575)).then(n=>n.CategoriesModule),canActivate:[e.n8],data:{breadcrumb:"Categories",guards:[e.uy,e.Z3]}},{path:"webhooks",loadChildren:()=>Promise.all([t.e(303),t.e(571)]).then(t.bind(t,79571)).then(n=>n.WebhooksModule),canActivate:[e.n8],data:{breadcrumb:"Webhooks",guards:[e.uy,e.Z3]}}]}];class h{static \u0275fac=function(i){return new(i||h)};static \u0275mod=s.oAB({type:h});static \u0275inj=s.cJS({imports:[d.Bz.forChild(U),d.Bz]})}var G=t(14268),R=t(17733),E=t(93149);class m{static \u0275fac=function(i){return new(i||m)};static \u0275mod=s.oAB({type:m});static \u0275inj=s.cJS({imports:[a.ez,h,A.ot,p.Ps,M.Is,v.aw,I.Z6,u.si,R.e]})}s.B6R(G.G,[a.mk,a.sg,a.O5,p.Hw,y.xG,u.wG,E.r],[v.X$])}}]);
//# sourceMappingURL=31.6155588b59308f6a.js.map